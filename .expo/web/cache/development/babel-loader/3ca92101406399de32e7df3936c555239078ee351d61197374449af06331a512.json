{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { getNewAccessToken } from \"./token\";\nimport { API_BASE_URL } from \"./apiConfig\";\nexport var fetchUserInfo = function () {\n  var _ref = _asyncToGenerator(function* (navigation, setUserInfo) {\n    try {\n      var accessToken = yield getNewAccessToken(navigation);\n      if (!accessToken) {\n        console.error(\"Ïï°ÏÑ∏Ïä§ ÌÜ†ÌÅ∞Ïù¥ ÏóÜÏäµÎãàÎã§.\");\n        return;\n      }\n      console.log(\"ÏÇ¨Ïö© Ï§ëÏù∏ Ïï°ÏÑ∏Ïä§ ÌÜ†ÌÅ∞:\", accessToken);\n      var response = yield fetch(API_BASE_URL + \"users/me/\", {\n        headers: {\n          Authorization: \"Bearer \" + accessToken,\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      console.log(\"ÏùëÎãµ ÏÉÅÌÉú:\", response.status);\n      var text = yield response.text();\n      console.log(\"ÏùëÎãµ Î≥∏Î¨∏:\", text);\n      try {\n        var data = JSON.parse(text);\n        console.log(\"ÏùëÎãµÏóêÏÑú ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Ï∞æÏùå\");\n        console.log(\"\\uC0AC\\uC6A9\\uC790 ID: \" + data.id);\n        console.log(\"\\uB2C9\\uB124\\uC784: \" + data.nickname);\n        console.log(\"\\uC774\\uBA54\\uC77C: \" + data.email);\n        console.log(\"\\uC131\\uBCC4: \" + (data.gender || \"(ÎØ∏ÏûÖÎ†•)\"));\n        console.log(\"\\uC0DD\\uC77C: \" + (data.birthdate || \"(ÎØ∏ÏûÖÎ†•)\"));\n        console.log(\"\\uC8FC\\uC18C: \" + (data.address || \"(ÎØ∏ÏûÖÎ†•)\"));\n        setUserInfo(data);\n      } catch (jsonErr) {\n        console.error(\"JSON ÌååÏã± Ïã§Ìå®:\", jsonErr);\n        setUserInfo(null);\n      }\n    } catch (err) {\n      console.error(\"ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÏöîÏ≤≠ Ïã§Ìå®:\", err);\n      setUserInfo(null);\n    }\n  });\n  return function fetchUserInfo(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var updateUserInfo = function () {\n  var _ref2 = _asyncToGenerator(function* (navigation, updatedFields) {\n    try {\n      var accessToken = yield getNewAccessToken(navigation);\n      if (!accessToken) {\n        console.error(\"Ïï°ÏÑ∏Ïä§ ÌÜ†ÌÅ∞Ïù¥ ÏóÜÏäµÎãàÎã§.\");\n        return false;\n      }\n      console.log(\"üîß ÏàòÏ†ï ÏöîÏ≤≠ Î≥¥ÎÇº ÌïÑÎìú:\", updatedFields);\n      var response = yield fetch(API_BASE_URL + \"users/me/\", {\n        method: \"PATCH\",\n        headers: {\n          Authorization: \"Bearer \" + accessToken,\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(updatedFields)\n      });\n      console.log(\"üîß ÏàòÏ†ï ÏùëÎãµ ÏÉÅÌÉú:\", response.status);\n      var text = yield response.text();\n      console.log(\"üîß ÏàòÏ†ï ÏùëÎãµ Î≥∏Î¨∏:\", text);\n      if (response.ok) {\n        return true;\n      } else {\n        return false;\n      }\n    } catch (err) {\n      console.error(\"ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÏàòÏ†ï Ïã§Ìå®:\", err);\n      return false;\n    }\n  });\n  return function updateUserInfo(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["AsyncStorage","getNewAccessToken","API_BASE_URL","fetchUserInfo","_ref","_asyncToGenerator","navigation","setUserInfo","accessToken","console","error","log","response","fetch","headers","Authorization","status","text","data","JSON","parse","id","nickname","email","gender","birthdate","address","jsonErr","err","_x","_x2","apply","arguments","updateUserInfo","_ref2","updatedFields","method","body","stringify","ok","_x3","_x4"],"sources":["/Users/seungyeon/Doodook_Frontend/src/utils/user.js"],"sourcesContent":["import AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { getNewAccessToken } from \"./token\";\nimport { API_BASE_URL } from \"./apiConfig\";\n\n// ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥Î•º Î∂àÎü¨ÏôÄ setUserInfoÏóê ÏÑ§Ï†ïÌï¥Ï£ºÎäî Ìï®Ïàò\nexport const fetchUserInfo = async (navigation, setUserInfo) => {\n  try {\n    const accessToken = await getNewAccessToken(navigation);\n    if (!accessToken) {\n      console.error(\"Ïï°ÏÑ∏Ïä§ ÌÜ†ÌÅ∞Ïù¥ ÏóÜÏäµÎãàÎã§.\");\n      return;\n    }\n\n    console.log(\"ÏÇ¨Ïö© Ï§ëÏù∏ Ïï°ÏÑ∏Ïä§ ÌÜ†ÌÅ∞:\", accessToken);\n\n    const response = await fetch(`${API_BASE_URL}users/me/`, {\n      headers: {\n        Authorization: `Bearer ${accessToken}`,\n        \"Content-Type\": \"application/json\",\n      },\n    });\n\n    console.log(\"ÏùëÎãµ ÏÉÅÌÉú:\", response.status);\n    const text = await response.text();\n    console.log(\"ÏùëÎãµ Î≥∏Î¨∏:\", text);\n\n    try {\n      const data = JSON.parse(text);\n      console.log(\"ÏùëÎãµÏóêÏÑú ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Ï∞æÏùå\");\n\n      console.log(`ÏÇ¨Ïö©Ïûê ID: ${data.id}`);\n      console.log(`ÎãâÎÑ§ÏûÑ: ${data.nickname}`);\n      console.log(`Ïù¥Î©îÏùº: ${data.email}`);\n      console.log(`ÏÑ±Î≥Ñ: ${data.gender || \"(ÎØ∏ÏûÖÎ†•)\"}`);\n      console.log(`ÏÉùÏùº: ${data.birthdate || \"(ÎØ∏ÏûÖÎ†•)\"}`);\n      console.log(`Ï£ºÏÜå: ${data.address || \"(ÎØ∏ÏûÖÎ†•)\"}`);\n\n      setUserInfo(data);\n    } catch (jsonErr) {\n      console.error(\"JSON ÌååÏã± Ïã§Ìå®:\", jsonErr);\n      setUserInfo(null);\n    }\n  } catch (err) {\n    console.error(\"ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÏöîÏ≤≠ Ïã§Ìå®:\", err);\n    setUserInfo(null);\n  }\n};\n\n// ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÏàòÏ†ï Ìï®Ïàò\nexport const updateUserInfo = async (navigation, updatedFields) => {\n  try {\n    const accessToken = await getNewAccessToken(navigation);\n    if (!accessToken) {\n      console.error(\"Ïï°ÏÑ∏Ïä§ ÌÜ†ÌÅ∞Ïù¥ ÏóÜÏäµÎãàÎã§.\");\n      return false;\n    }\n\n    console.log(\"üîß ÏàòÏ†ï ÏöîÏ≤≠ Î≥¥ÎÇº ÌïÑÎìú:\", updatedFields);\n\n    const response = await fetch(`${API_BASE_URL}users/me/`, {\n      method: \"PATCH\",\n      headers: {\n        Authorization: `Bearer ${accessToken}`,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(updatedFields),\n    });\n\n    console.log(\"üîß ÏàòÏ†ï ÏùëÎãµ ÏÉÅÌÉú:\", response.status);\n    const text = await response.text();\n    console.log(\"üîß ÏàòÏ†ï ÏùëÎãµ Î≥∏Î¨∏:\", text);\n\n    if (response.ok) {\n      return true; // ÏÑ±Í≥µ\n    } else {\n      return false; // Ïã§Ìå®\n    }\n  } catch (err) {\n    console.error(\"ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÏàòÏ†ï Ïã§Ìå®:\", err);\n    return false;\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}